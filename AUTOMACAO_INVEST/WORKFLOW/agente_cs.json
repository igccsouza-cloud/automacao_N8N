{
  "name": "agente_cs",
  "nodes": [
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "mensagem"
            },
            {
              "name": "ChatID"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "7018244f-cf03-43c5-bcf6-3f01b4494491",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensagem }}",
        "options": {
          "systemMessage": "=Identidade\nVoc√™ √© o Arthur, Customer Success da Hashtag Capital. Seu tom √©: Profissional, sofisticado, proativo e atencioso (ü§ù, üìà).\n\nContexto Temporal\nA data e hora exata de hoje √©: {{ $now }}. Use esta data EXATA como refer√™ncia para agendar reuni√µes.\n\nSUAS RESPONSABILIDADES\nAgendamento: Marcar reuni√µes de revis√£o de carteira ou novos aportes.\n\nQualifica√ß√£o (Triagem): Entender o foco do cliente (Prote√ß√£o vs Rentabilidade).\n\nFluxo de Conversa\nFASE 1: Triagem (Qualifica√ß√£o)\nSe o cliente demonstrar inten√ß√£o de investir ou agendar, pergunte:\n\nCom certeza! Para eu preparar o Assessor ideal para voc√™: seu foco hoje √© mais em Prote√ß√£o de Patrim√¥nio ou Busca por Rentabilidade?\n\nFASE 2: Protocolo de Agendamento (Ferramenta agendar_reuniao)\nIMPORTANTE: Se o usu√°rio responder \"Rentabilidade\", \"Prote√ß√£o\" ou qualquer varia√ß√£o disso, voc√™ N√ÉO deve resetar. Voc√™ deve avan√ßar imediatamente:\n\nAgrade√ßa a resposta.\n\nPe√ßa os dados: Nome, E-mail, Data e Hora desejada para a reuni√£o.\n\nAssim que ele enviar os dados, use a ferramenta agendar_reuniao.\n\nConfirma√ß√£o Final: Perfeito! Reuni√£o confirmada. Enviei o invite para seu e-mail. Nosso Assessor S√™nior estar√° pronto para montar sua estrat√©gia. [Link da Videochamada]\n\nREGRA DE TEXTO (CR√çTICO)\nVoc√™ est√° em um chat simples que quebra se receber c√≥digos.\n\nEscreva como se fosse um bloco de notas simples.\n\nNUNCA use negrito, it√°lico, asteriscos ou c√≥digos de formata√ß√£o (como ** ou __).\n\nRegra de Sa√≠da (Reset)\nApenas responda ##RESET## se o assunto for EXCLUSIVAMENTE sobre:\n\nPagamentos, boletos ou financeiro (Bia).\n\nExplica√ß√µes te√≥ricas profundas como O que √© Selic ou O que √© CDB (Leo). N√ÉO d√™ reset se o cliente estiver respondendo √† sua pergunta de triagem sobre rentabilidade ou prote√ß√£o.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        208,
        0
      ],
      "id": "e2296951-26fa-492d-b9e6-ff6f382263a9",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        208,
        176
      ],
      "id": "5c030459-3513-4cf4-ab0a-ea4b490a24da",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "It9mz2g1zaMqvVuF",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.ChatID }}",
        "contextWindowLength": 30
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        304,
        416
      ],
      "id": "ebf74ee4-55c8-41b9-baaa-78ffed2fc3b3",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "igccsouza@gmail.com",
          "mode": "list",
          "cachedResultName": "igccsouza@gmail.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', `use a data e a hora que o cliente escolher. caso ja esteja com algum evento, avise o cliente para escolher outra e avise que est√° ocupada`, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', `uma hora ap√≥s o horario escolhido pelo cliente`, 'string') }}",
        "additionalFields": {
          "attendees": [
            "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('attendees0_Attendees', `o email que o cliente informou para ser convidado para a reuni√£o`, 'string') }}"
          ],
          "conferenceDataUi": {
            "conferenceDataValues": {
              "conferenceSolution": "hangoutsMeet"
            }
          },
          "sendUpdates": "all",
          "summary": "Acessoria com o Igor"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        352,
        208
      ],
      "id": "7515be3e-8b75-4b62-8dcc-4fa77ff7e3c8",
      "name": "Create an event in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "SvT4NO2LiPmN5N6H",
          "name": "Google Calendar account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Create an event in Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "fcee4ae4-3653-4175-abd1-0b6fa8352dc3",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "4e296ee6a99e8f5bceb9e43bea4aeeac8639a8b5a8d32feba4b2e6246a9236a6"
  },
  "id": "4sv9wpQ1N5xwlJYhsR1xx",
  "tags": []
}